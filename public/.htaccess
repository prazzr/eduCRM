# EduCRM Slim Router - Apache Configuration
# Phase 1: Foundation Strengthening

RewriteEngine On

# Skip existing files and directories
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# Redirect everything else to front controller
RewriteRule ^ index.php [QSA,L]

# Set environment variables
SetEnv APP_ENV production

# Security headers
<IfModule mod_headers.c>
    Header set X-Content-Type-Options "nosniff"
    Header set X-Frame-Options "SAMEORIGIN"
    Header set X-XSS-Protection "1; mode=block"
    Header set Referrer-Policy "strict-origin-when-cross-origin"
</IfModule>

# Disable directory browsing
Options -Indexes

# Deny access to sensitive files
<FilesMatch "(^\.env|composer\.json|composer\.lock)$">
    Order Allow,Deny
    Deny from all
</FilesMatch>
